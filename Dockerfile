# ğŸ® TONOSAMA Professional System - Docker Configuration
# 1å…†å††ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ç´šå“è³ªã®å®Œç’§ãªDockerã‚¤ãƒ¡ãƒ¼ã‚¸

FROM python:3.11-slim

# ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    software-properties-common \
    git \
    && rm -rf /var/lib/apt/lists/*

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­å®š
WORKDIR /app

# ä¾å­˜é–¢ä¿‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
COPY requirements.txt .

# Pythonä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN pip3 install --upgrade pip
RUN pip3 install -r requirements.txt

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ”ãƒ¼
COPY . .

# ãƒãƒ¼ãƒˆå…¬é–‹
EXPOSE 8501

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
HEALTHCHECK CMD curl --fail http://localhost:8501/_stcore/health

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
ENTRYPOINT ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]